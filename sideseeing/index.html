<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SideSeeing Project</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script>
        function createCityTable(content, elementID) {
            var htmlTable = '<table class="table is-bordered"><thead><tr><th>Item</th><th>Frequency</th></tr></thead><tbody>';

            for (var chave in content["Frequency"]) {
                htmlTable += '<tr>';
                htmlTable += '<td>' + chave + '</td>';
                htmlTable += '<td>' + content["Frequency"][chave] + '</td>';
                htmlTable += '</tr>';
            }
    
            htmlTable += '</tr></thead><tbody>';
    
            for (var i = 0; i < content.length; i++) {
                htmlTable += '<tr>';
                for (var chave in content[i]) {
                    htmlTable += '<td>' + content[i][chave] + '</td>';
                }
                htmlTable += '</tr>';
            }
    
            htmlTable += '</tbody></table>';
    
            $(elementID).html(htmlTable);
        }

        function getAndShowData(url, elementID){
                $(document).ready(function() {
                jsonData = jQuery.getJSON(url).done(function(data){
                    createCityTable(data, elementID);
                })
            });
        }

        function getAndShowMap(url, elementID){
                $(document).ready(function() {
                jQuery.get(url).done(function(data){
                    var iFrame = $(elementID);
                    $(iFrame).append(iFrame);

                    var iFrameDoc = iFrame[0].contentDocument || iFrame[0].contentWindow.document;
                    iFrameDoc.write(data);
                    iFrameDoc.close();
                })
            });
        }

        getAndShowData("https://storage.googleapis.com/sideseeing/cities.json", "#cities-content");

        getAndShowData("https://storage.googleapis.com/sideseeing/tags-frequency.json", "#tags-content");

        getAndShowMap("https://storage.googleapis.com/sideseeing/map.html", "#map-content")
    </script>
</head>

    </section>

    <footer class="footer" style="margin-top: 50px; border-top: 1px solid lightgrey;">
        <div class="content has-text-centered">
            <p>
                SideSeeing Project - 2024<br/>
                University of SÃ£o Paulo
            </p>
        </div>
    </footer>

</body>
</html>
